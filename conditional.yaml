---
 - name: Installing softwares using loop and when condition
   hosts: all
   become: yes
   gather_facts: true
   tasks:
    - name: Display distribution major version
      debug:
       msg: "Distribution major version is {{ ansible_distribution_major_version }}"

    - name: Softwares downloading if when condition is true
      apt:
        name: "{{item}}"
        state: latest
      when: (ansible_facts['distribution'] == "Ubuntu" and ansible_facts['distribution_major_version'] == "22")
      loop:
        - git
        - htop
        - python3